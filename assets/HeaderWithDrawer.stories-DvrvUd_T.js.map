{"version":3,"file":"HeaderWithDrawer.stories-DvrvUd_T.js","sources":["../../../src/stories/HeaderWithDrawerWrapper.svelte","../../../src/stories/HeaderWithDrawer.stories.ts"],"sourcesContent":["<script lang=\"ts\">\n  import Header from '$lib/Header.svelte';\n  import SlideMenu from '$lib/SlideMenu.svelte';\n  import { CCLVividColor, HeaderHeight } from '$lib/const/config';\n\n  export let bgColor: string = CCLVividColor.STRAWBERRY_PINK;\n  export let height: string = HeaderHeight.NORMAL;\n  export let side: 'left' | 'right' | 'top' | 'bottom' = 'left';\n  export let size: string = '320px';\n\n  let open = false;\n  const openDrawer = () => (open = true);\n  const closeDrawer = () => (open = false);\n</script>\n\n<div class=\"hdr-drawer-demo\">\n  <Header {bgColor} {height} />\n\n  <button type=\"button\" class=\"hamburger\" aria-label=\"メニューを開く\" on:click={openDrawer}>\n    ☰\n  </button>\n\n  <SlideMenu\n    {open}\n    {side}\n    {size}\n    title=\"メニュー\"\n    ariaLabel=\"メインメニュー\"\n    items={[\n      { id: 'home', label: 'Home', href: '#' },\n      { id: 'products', label: 'Products', href: '#' },\n      { id: 'about', label: 'About', href: '#' },\n      { id: 'contact', label: 'Contact', href: '#' }\n    ]}\n    currentId={'home'}\n    on:close={closeDrawer}\n    on:select={() => closeDrawer()}\n  />\n</div>\n\n<style>\n  .hdr-drawer-demo {\n    position: relative;\n    /* Header height varies; reserve enough space for overlay button */\n    min-height: 140px;\n  }\n  .hamburger {\n    position: absolute; /* overlay inside header area */\n    z-index: 10001; /* above header anchor */\n    top: 16px;\n    left: 5%;\n    transform: translateX(-50%);\n    width: 40px;\n    height: 40px;\n    display: inline-flex;\n    align-items: center;\n    justify-content: center;\n    border: none;\n    background: transparent;\n    color: #fff; /* blend into colored header */\n    font-size: 26px;\n    line-height: 1;\n    cursor: pointer;\n    pointer-events: auto; /* clickable */\n  }\n  .hamburger:focus-visible {\n    outline: 2px solid #fff;\n    outline-offset: 2px;\n    border-radius: 6px;\n  }\n</style>\n","import type { Meta, StoryObj } from '@storybook/svelte';\nimport { within, userEvent, expect } from '@storybook/test';\nimport Header from '$lib/Header.svelte';\nimport { CCLVividColor, HeaderHeight } from '$lib/const/config';\nimport HeaderWithDrawerWrapper from './HeaderWithDrawerWrapper.svelte';\n\nconst colorOptions = [\n  CCLVividColor.STRAWBERRY_PINK,\n  CCLVividColor.PINEAPPLE_YELLOW,\n  CCLVividColor.SODA_BLUE,\n  CCLVividColor.MELON_GREEN,\n  CCLVividColor.GRAPE_PURPLE,\n  CCLVividColor.WRAP_GREY\n];\n\nconst heightOptions = [HeaderHeight.NALLOW, HeaderHeight.NORMAL, HeaderHeight.WIDE];\n\nconst meta = {\n  title: 'Compositions/HeaderWithDrawer',\n  component: Header,\n  tags: ['autodocs'],\n  parameters: { layout: 'fullscreen' },\n  argTypes: {\n    bgColor: { control: { type: 'select' }, options: colorOptions },\n    height: { control: { type: 'select' }, options: heightOptions },\n    side: { control: { type: 'radio' }, options: ['left', 'right', 'top', 'bottom'] },\n    size: { control: { type: 'text' } }\n  }\n} satisfies Meta<Header>;\n\nexport default meta;\ntype Story = StoryObj<typeof meta>;\n\nexport const Default: Story = {\n  render: (args) => ({ Component: HeaderWithDrawerWrapper, props: args }),\n  args: {\n    bgColor: CCLVividColor.STRAWBERRY_PINK,\n    height: HeaderHeight.NORMAL,\n    side: 'left',\n    size: '320px'\n  },\n  play: async ({ canvasElement, step }) => {\n    const canvas = within(canvasElement);\n    const getDialog = () => canvas.getByRole('dialog', { hidden: true });\n    await step('初期状態ではドロワーが閉じていること', async () => {\n      await expect(getDialog()).toHaveAttribute('aria-hidden', 'true');\n    });\n    await step('ハンバーガーアイコンで開くこと', async () => {\n      await userEvent.click(canvas.getByRole('button', { name: /メニューを開く/i }));\n      await expect(canvas.getByRole('dialog')).toHaveAttribute('aria-hidden', 'false');\n    });\n    await step('Backdropクリックで閉じること', async () => {\n      const backdrop = canvas.getByTestId('drawer-backdrop');\n      await userEvent.click(backdrop);\n      await expect(getDialog()).toHaveAttribute('aria-hidden', 'true');\n    });\n  }\n};\n"],"names":["bgColor","cov_2putrnjr4x","s","$","$$props","f","CCLVividColor","STRAWBERRY_PINK","closeDrawer","open","openDrawer","colorOptions","PINEAPPLE_YELLOW","SODA_BLUE","MELON_GREEN","GRAPE_PURPLE","WRAP_GREY","heightOptions","HeaderHeight","NALLOW","NORMAL","WIDE","meta","title","component","Header","tags","parameters","layout","argTypes","control","type","options","height","side","size","Default","render","args","Component","HeaderWithDrawerWrapper","props","play","canvasElement","step","canvas","within","getDialog","getByRole","hidden","expect","toHaveAttribute","userEvent","click","name","backdrop","getByTestId","docs","source","originalSource"],"mappings":"koQAGWA,GAAeC,EAAA,EAAAC,EAAA,CAAA,IAAAC,EAAAC,EAAA,UAAA,GAAA,KAAAH,EAAA,EAAAI,EAAA,CAAA,IAAAJ,EAAA,EAAAC,EAAA,CAAA,IAAAI,EAAoBC,gBAAA,gPAEjCC,EAAeA,KAAAP,EAAA,EAAAI,EAAA,CAAA,IAAAJ,EAAA,EAAAC,EAAA,EAAA,IAAAC,EAAAM,EAAA,EAAA,GAAAR,EAAA,EAAAC,EAAA,EAAA,2qBAOaQ,CAAA,EAAAT,EAAA,EAAAC,EAAA,EAAA,0BAN5B,y/BCAb,MAAMS,EAAe,CACnBL,EAAcC,gBACdD,EAAcM,iBACdN,EAAcO,UACdP,EAAcQ,YACdR,EAAcS,aACdT,EAAcU,SAAQ,EAGlBC,EAAgB,CAACC,EAAaC,OAAQD,EAAaE,OAAQF,EAAaG,IAAI,EAE5EC,GAAO,CACXC,MAAO,gCACPC,UAAWC,EACXC,KAAM,CAAC,UAAU,EACjBC,WAAY,CAAEC,OAAQ,YAAA,EACtBC,SAAU,CACR7B,QAAS,CAAE8B,QAAS,CAAEC,KAAM,QAAA,EAAYC,QAASrB,CAAAA,EACjDsB,OAAQ,CAAEH,QAAS,CAAEC,KAAM,QAAA,EAAYC,QAASf,CAAAA,EAChDiB,KAAM,CAAEJ,QAAS,CAAEC,KAAM,OAAA,EAAWC,QAAS,CAAC,OAAQ,QAAS,MAAO,QAAQ,CAAA,EAC9EG,KAAM,CAAEL,QAAS,CAAEC,KAAM,MAAA,CAAO,CAAE,CAEtC,EAKaK,EAAiB,CAC5BC,OAASC,IAAU,CAAEC,UAAWC,EAAyBC,MAAOH,CAAAA,GAChEA,KAAM,CACJtC,QAASM,EAAcC,gBACvB0B,OAAQf,EAAaE,OACrBc,KAAM,OACNC,KAAM,OAAA,EAERO,KAAM,MAAO,CAAEC,cAAAA,EAAeC,KAAAA,CAAAA,IAAW,CACvC,MAAMC,EAASC,EAAOH,CAAa,EAC7BI,EAAYA,IAAMF,EAAOG,UAAU,SAAU,CAAEC,OAAQ,EAAA,CAAM,EACnE,MAAML,EAAK,qBAAsB,SAAY,CAC3C,MAAMM,EAAOH,EAAAA,CAAW,EAAEI,gBAAgB,cAAe,MAAM,CACjE,CAAC,EACD,MAAMP,EAAK,kBAAmB,SAAY,CACxC,MAAMQ,EAAUC,MAAMR,EAAOG,UAAU,SAAU,CAAEM,KAAM,UAAA,CAAY,CAAC,EACtE,MAAMJ,EAAOL,EAAOG,UAAU,QAAQ,CAAC,EAAEG,gBAAgB,cAAe,OAAO,CACjF,CAAC,EACD,MAAMP,EAAK,qBAAsB,SAAY,CAC3C,MAAMW,EAAWV,EAAOW,YAAY,iBAAiB,EACrD,MAAMJ,EAAUC,MAAME,CAAQ,EAC9B,MAAML,EAAOH,EAAAA,CAAW,EAAEI,gBAAgB,cAAe,MAAM,CACjE,CAAC,CACH,CACF,YAACf,EAAAT,WAAA,CAAA,GAAAS,EAAAT,WAAA8B,KAAA,CAAA,IAAArB,EAAAA,EAAAT,aAAAS,YAAAA,EAAAqB,KAAAC,OAAA,CAAAC,eAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAA,IAAAvB,GAAAA,EAAAA,EAAAT,aAAAS,YAAAA,EAAAqB,OAAArB,YAAAA,EAAAsB,MAAAA,CAAA,CAAA"}