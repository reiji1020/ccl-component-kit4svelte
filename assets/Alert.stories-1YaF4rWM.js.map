{"version":3,"file":"Alert.stories-1YaF4rWM.js","sources":["../../../src/lib/Alert.svelte","../../../src/stories/Alert.stories.ts"],"sourcesContent":["<script lang=\"ts\">\n    import './const/variables.css';\n    import { CCLVividColor } from './const/config';\n    import { createEventDispatcher } from 'svelte';\n\n    const dispatch = createEventDispatcher();\n\n    /**\n     * The message to display in the alert.\n     * @type {string}\n     */\n    export let message: string;\n\n    /**\n     * The type of the alert, which determines its styling.\n     * @type {'success' | 'error' | 'warning' | 'info'}\n     * @default 'info'\n     */\n    export let type: 'success' | 'error' | 'warning' | 'info' = 'info';\n\n    /**\n     * Whether the alert can be dismissed by the user.\n     * @type {boolean}\n     * @default false\n     */\n    export let dismissible: boolean = false;\n\n    /**\n     * Whether the alert should have an outline style.\n     * @type {boolean}\n     * @default false\n     */\n    export let outline: boolean = false;\n\n    let baseColor: string;\n    let computedBgColor: string;\n    let computedBorderColor: string;\n    let textColor: string;\n\n    $: {\n        switch (type) {\n            case 'success':\n                baseColor = CCLVividColor.MELON_GREEN;\n                break;\n            case 'error':\n                baseColor = CCLVividColor.STRAWBERRY_PINK;\n                break;\n            case 'warning':\n                baseColor = CCLVividColor.PINEAPPLE_YELLOW;\n                break;\n            case 'info':\n                baseColor = CCLVividColor.SODA_BLUE;\n                break;\n            default:\n                baseColor = CCLVividColor.SODA_BLUE; // Fallback\n        }\n\n        if (outline) {\n            computedBgColor = 'transparent';\n            computedBorderColor = baseColor;\n            textColor = 'var(--wrap-grey)'; // Outline alerts usually have dark text for contrast\n        } else {\n            computedBgColor = baseColor;\n            computedBorderColor = 'transparent'; // No border for filled alerts\n            textColor = 'white'; // Default text color for filled alerts\n            if (type === 'warning') {\n                textColor = 'white'; // Ensure warning text is white for filled style\n            }\n        }\n    }\n\n    function dismissAlert() {\n        dispatch('dismiss');\n    }\n</script>\n\n<div\n    class=\"alert-wrapper\"\n    class:dismissible={dismissible}\n    class:outline={outline}\n    style=\"background-color: var({computedBgColor}); color: {textColor}; border-color: var({computedBorderColor});\"\n>\n    <span class=\"alert-message\">{message}</span>\n    {#if dismissible}\n        <button class=\"dismiss-button\" on:click={dismissAlert} aria-label=\"Dismiss alert\">\n            &times;\n        </button>\n    {/if}\n</div>\n\n<style>\n    .alert-wrapper {\n        padding: 12px 20px;\n        border-radius: 8px;\n        display: flex;\n        justify-content: space-between;\n        align-items: center;\n        font-size: 16px;\n        font-weight: 500;\n        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\n        margin-bottom: 10px; /* Add some spacing when multiple alerts are shown */\n        border: 2px solid; /* Use solid border, color set by style attribute */\n    }\n\n    .alert-message {\n        flex-grow: 1;\n    }\n\n    .dismiss-button {\n        background: none;\n        border: none;\n        color: inherit; /* Inherit text color from parent */\n        font-size: 20px;\n        cursor: pointer;\n        margin-left: 15px;\n        padding: 0;\n        line-height: 1;\n        opacity: 0.7;\n        transition: opacity 0.2s ease-in-out;\n    }\n\n    .dismiss-button:hover {\n        opacity: 1;\n    }\n</style>","import type { Meta, StoryObj } from '@storybook/svelte';\nimport Alert from '../lib/Alert.svelte';\nimport { expect, fn, userEvent, within } from '@storybook/test';\n\nconst meta = {\n\ttitle: 'CommonComponents/Alert',\n\tcomponent: Alert,\n\ttags: ['autodocs'],\n\targTypes: {\n\t\tmessage: {\n\t\t\tcontrol: { type: 'text' }\n\t\t},\n\t\ttype: {\n\t\t\tcontrol: { type: 'select' },\n\t\t\toptions: ['success', 'error', 'warning', 'info']\n\t\t},\n\t\tdismissible: {\n\t\t\tcontrol: { type: 'boolean' }\n\t\t},\n\t\toutline: {\n\t\t\tcontrol: { type: 'boolean' }\n\t\t},\n\t\tonDismiss: { action: 'dismiss' }\n\t}\n} satisfies Meta<Alert>;\n\nexport default meta;\ntype Story = StoryObj<typeof meta>;\n\nexport const Success: Story = {\n\targs: {\n\t\tmessage: '操作が正常に完了しました。',\n\t\ttype: 'success',\n\t\tdismissible: true\n\t},\n\tplay: async ({ canvasElement, args, step }) => {\n\t\tconst canvas = within(canvasElement);\n\t\tconst alert = canvas.getByText(args.message);\n\t\tawait expect(alert).toBeInTheDocument();\n\n\t\tif (args.dismissible) {\n\t\t\tawait step('閉じるボタンが表示されていること', async () => {\n\t\t\t\tconst dismissButton = canvas.getByLabelText('Dismiss alert');\n\t\t\t\tawait expect(dismissButton).toBeInTheDocument();\n\t\t\t});\n\n\t\t\tawait step('閉じるボタンをクリックするとonDismissイベントが発火すること', async () => {\n\t\t\t\tconst dismissButton = canvas.getByLabelText('Dismiss alert');\n\t\t\t\tawait userEvent.click(dismissButton);\n\t\t\t\tawait expect(args.onDismiss).toHaveBeenCalled();\n\t\t\t});\n\t\t}\n\t}\n};\n\nexport const Error: Story = {\n\targs: {\n\t\tmessage: 'エラーが発生しました。もう一度お試しください。',\n\t\ttype: 'error',\n\t\tdismissible: true\n\t}\n};\n\nexport const Warning: Story = {\n\targs: {\n\t\tmessage: '入力内容を確認してください。',\n\t\ttype: 'warning',\n\t\tdismissible: true\n\t}\n};\n\nexport const Info: Story = {\n\targs: {\n\t\tmessage: '新しい情報があります。',\n\t\ttype: 'info',\n\t\tdismissible: false\n\t}\n};\n\nexport const NotDismissible: Story = {\n\targs: {\n\t\tmessage: 'このアラートは閉じられません。',\n\t\ttype: 'info',\n\t\tdismissible: false\n\t},\n\tplay: async ({ canvasElement, args, step }) => {\n\t\tconst canvas = within(canvasElement);\n\t\tconst alert = canvas.getByText(args.message);\n\t\tawait expect(alert).toBeInTheDocument();\n\n\t\tawait step('閉じるボタンが表示されていないこと', async () => {\n\t\t\tconst dismissButton = canvas.queryByLabelText('Dismiss alert');\n\t\t\tawait expect(dismissButton).not.toBeInTheDocument();\n\t\t});\n\t}\n};\n\nexport const OutlineSuccess: Story = {\n\targs: {\n\t\tmessage: '操作が正常に完了しました。',\n\t\ttype: 'success',\n\t\tdismissible: true,\n\t\toutline: true\n\t}\n};\n\nexport const OutlineError: Story = {\n\targs: {\n\t\tmessage: 'エラーが発生しました。もう一度お試しください。',\n\t\ttype: 'error',\n\t\tdismissible: true,\n\t\toutline: true\n\t}\n};\n\nexport const OutlineWarning: Story = {\n\targs: {\n\t\tmessage: '入力内容を確認してください。',\n\t\ttype: 'warning',\n\t\tdismissible: true,\n\t\toutline: true\n\t}\n};\n\nexport const OutlineInfo: Story = {\n\targs: {\n\t\tmessage: '新しい情報があります。',\n\t\ttype: 'info',\n\t\tdismissible: false,\n\t\toutline: true\n\t}\n};\n"],"names":["target","button","anchor","cov_1vnn4dv4v7","s","ctx","dismissible","b","$$props","computedBorderColor","baseColor","meta","title","component","Alert","tags","argTypes","message","control","type","options","outline","onDismiss","action","Success","args","play","canvasElement","step","canvas","within","alert","getByText","expect","toBeInTheDocument","dismissButton","getByLabelText","userEvent","click","toHaveBeenCalled","Error","Warning","Info","NotDismissible","queryByLabelText","not","OutlineSuccess","OutlineError","OutlineWarning","OutlineInfo","parameters","docs","source","originalSource"],"mappings":"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"}