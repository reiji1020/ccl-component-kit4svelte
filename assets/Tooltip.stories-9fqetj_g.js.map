{"version":3,"file":"Tooltip.stories-9fqetj_g.js","sources":["../../../src/lib/Tooltip.svelte","../../../src/stories/Tooltip.stories.ts"],"sourcesContent":["<script lang=\"ts\">\n\timport { CCLVividColor } from './const/config';\n\n\texport let text: string;\n\texport let position: 'top' | 'bottom' | 'left' | 'right' = 'top';\n\texport let disabled = false;\n\texport let backgroundColor: string = CCLVividColor.WRAP_GREY;\n\n\t// ユニークなIDを生成してaria-describedbyで使用\n\tconst tooltipId = `tooltip-${Math.random().toString(36).substr(2, 9)}`;\n</script>\n\n<div\n\tclass=\"tooltip-trigger\"\n\tdata-testid=\"tooltip-trigger\"\n\ttabindex=\"0\"\n\taria-describedby={!disabled ? tooltipId : undefined}\n>\n\t<slot />\n\t<span\n\t\t{...{ id: tooltipId }}\n\t\tstyle:--tooltip-background-color={backgroundColor.startsWith('--')\n\t\t\t? `var(${backgroundColor})`\n\t\t\t: backgroundColor}\n\t\tclass=\"tooltip-content\"\n\t\tdata-testid=\"tooltip-content\"\n\t\tclass:disabled\n\t\tclass:top={position === 'top'}\n\t\tclass:bottom={position === 'bottom'}\n\t\tclass:left={position === 'left'}\n\t\tclass:right={position === 'right'}\n\t\trole=\"tooltip\"\n\t>\n\t\t{text}\n\t</span>\n</div>\n\n<style>\n\t.tooltip-trigger {\n\t\tposition: relative;\n\t\tdisplay: inline-block;\n\t\tcursor: pointer;\n\t}\n\n\t.tooltip-content {\n\t\tposition: absolute;\n\t\tz-index: 10;\n\t\tbackground-color: var(--tooltip-background-color);\n\t\tcolor: white;\n\t\tpadding: 0.5em 1em;\n\t\tborder-radius: 4px;\n\t\tfont-size: 0.875rem;\n\t\tline-height: 1.4;\n\t\twhite-space: nowrap;\n\t\t/* デフォルトは非表示 */\n\t\tvisibility: hidden;\n\t\topacity: 0;\n\t\ttransition:\n\t\t\topacity 0.2s,\n\t\t\tvisibility 0.2s;\n\t}\n\n\t/* disabledの場合は完全に非表示 */\n\t.tooltip-content.disabled {\n\t\tdisplay: none;\n\t}\n\n\t/* ホバーまたはフォーカスで表示 */\n\t.tooltip-trigger:hover .tooltip-content,\n\t.tooltip-trigger:focus .tooltip-content {\n\t\tvisibility: visible;\n\t\topacity: 1;\n\t}\n\n\t/* 吹き出しの矢印 */\n\t.tooltip-content::after {\n\t\tcontent: '';\n\t\tposition: absolute;\n\t\tborder-style: solid;\n\t}\n\n\t/* --- ポジションごとのスタイル --- */\n\n\t/* 上に表示 */\n\t.tooltip-content.top {\n\t\tbottom: 100%;\n\t\tleft: 50%;\n\t\ttransform: translateX(-50%);\n\t\tmargin-bottom: 8px;\n\t}\n\t.tooltip-content.top::after {\n\t\ttop: 100%;\n\t\tleft: 50%;\n\t\ttransform: translateX(-50%);\n\t\tborder-width: 5px;\n\t\tborder-color: var(--tooltip-background-color) transparent transparent transparent;\n\t}\n\n\t/* 下に表示 */\n\t.tooltip-content.bottom {\n\t\ttop: 100%;\n\t\tleft: 50%;\n\t\ttransform: translateX(-50%);\n\t\tmargin-top: 8px;\n\t}\n\t.tooltip-content.bottom::after {\n\t\tbottom: 100%;\n\t\tleft: 50%;\n\t\ttransform: translateX(-50%);\n\t\tborder-width: 5px;\n\t\tborder-color: transparent transparent var(--tooltip-background-color) transparent;\n\t}\n\n\t/* 左に表示 */\n\t.tooltip-content.left {\n\t\tright: 100%;\n\t\ttop: 50%;\n\t\ttransform: translateY(-50%);\n\t\tmargin-right: 8px;\n\t}\n\t.tooltip-content.left::after {\n\t\tleft: 100%;\n\t\ttop: 50%;\n\t\ttransform: translateY(-50%);\n\t\tborder-width: 5px;\n\t\tborder-color: transparent transparent transparent var(--tooltip-background-color);\n\t}\n\n\t/* 右に表示 */\n\t.tooltip-content.right {\n\t\tleft: 100%;\n\t\ttop: 50%;\n\t\ttransform: translateY(-50%);\n\t\tmargin-left: 8px;\n\t}\n\t.tooltip-content.right::after {\n\t\tright: 100%;\n\t\ttop: 50%;\n\t\ttransform: translateY(-50%);\n\t\tborder-width: 5px;\n\t\tborder-color: transparent var(--tooltip-background-color) transparent transparent;\n\t}\n</style>\n","import type { Meta, StoryObj } from '@storybook/svelte';\nimport TooltipWrapper from './TooltipWrapper.svelte';\nimport AllColorsTooltipWrapper from './AllColors/AllColorsTooltipWrapper.svelte';\nimport { expect, userEvent, within, waitFor, fireEvent } from '@storybook/test';\nimport { CCLVividColor } from '../lib/const/config';\n\nconst colorOptions = [...Object.values(CCLVividColor)];\n\nconst meta = {\n\ttitle: 'CommonComponents/Tooltip',\n\tcomponent: TooltipWrapper,\n\ttags: ['autodocs'],\n\tparameters: {\n\t\tlayout: 'centered'\n\t},\n\targTypes: {\n\t\ttext: {\n\t\t\tcontrol: 'text',\n\t\t\ttype: { required: true },\n\t\t\tdescription: 'ツールチップとして表示されるテキスト'\n\t\t},\n\t\tposition: {\n\t\t\tcontrol: 'select',\n\t\t\toptions: ['top', 'bottom', 'left', 'right'],\n\t\t\tdescription: 'ツールチップの表示位置'\n\t\t},\n\t\tdisabled: {\n\t\t\tcontrol: 'boolean',\n\t\t\tdescription: 'ツールチップを無効化するかどうか'\n\t\t},\n\t\tbackgroundColor: {\n\t\t\tcontrol: 'select',\n\t\t\toptions: colorOptions,\n\t\t\tdescription: 'ツールチップの背景色'\n\t\t}\n\t}\n} satisfies Meta<TooltipWrapper>;\n\nexport default meta;\ntype Story = StoryObj<typeof meta>;\n\nexport const Default: Story = {\n\targs: {\n\t\ttext: 'これはツールチップです',\n\t\tposition: 'top',\n\t\tbackgroundColor: CCLVividColor.WRAP_GREY\n\t}\n};\n\nexport const PositionBottom: Story = {\n\t...Default,\n\targs: {\n\t\t...Default.args,\n\t\tposition: 'bottom'\n\t}\n};\n\nexport const PositionLeft: Story = {\n\t...Default,\n\targs: {\n\t\t...Default.args,\n\t\tposition: 'left'\n\t}\n};\n\nexport const PositionRight: Story = {\n\t...Default,\n\targs: {\n\t\t...Default.args,\n\t\tposition: 'right'\n\t}\n};\n\nexport const Disabled: Story = {\n\t...Default,\n\targs: {\n\t\t...Default.args,\n\t\tdisabled: true\n\t},\n\tplay: async ({ canvasElement, step }) => {\n\t\tconst canvas = within(canvasElement);\n\t\tconst trigger = canvas.getByTestId('tooltip-trigger');\n\n\t\t// disabledの場合、フォーカスしてもツールチップが表示されないこと\n\t\tawait step('disabledの場合、フォーカスしてもツールチップが表示されないこと', async () => {\n\t\t\tconst tooltip = canvas.queryByTestId('tooltip-content');\n\t\t\tawait expect(tooltip).not.toBeVisible(); // disabledの場合はDOM自体は存在するが非表示\n\t\t});\n\t}\n};\n\nexport const AllColors: Story = {\n\trender: () => ({\n\t\tComponent: AllColorsTooltipWrapper\n\t}),\n\targs: {},\n\tparameters: {\n\t\tlayout: 'fullscreen',\n\t\tdocs: {\n\t\t\tsource: {\n\t\t\t\tcode: null\n\t\t\t}\n\t\t}\n\t}\n};\n"],"names":["toggle_class","span","ctx","cov_2dy5vxs9sw","s","colorOptions","Object","values","CCLVividColor","meta","title","component","TooltipWrapper","tags","parameters","layout","argTypes","text","control","type","required","description","position","options","disabled","backgroundColor","Default","args","WRAP_GREY","PositionBottom","PositionLeft","PositionRight","Disabled","play","canvasElement","step","canvas","within","getByTestId","tooltip","queryByTestId","expect","not","toBeVisible","AllColors","render","Component","AllColorsTooltipWrapper","docs","source","code","originalSource"],"mappings":"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"}