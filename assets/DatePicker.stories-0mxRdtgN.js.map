{"version":3,"file":"DatePicker.stories-0mxRdtgN.js","sources":["../../../src/stories/AllColors/AllColorsDatePickerWrapper.svelte","../../../src/stories/DatePicker.stories.ts"],"sourcesContent":["<script lang=\"ts\">\n\timport DatePicker from '../../lib/DatePicker.svelte';\n\timport { CCLVividColor, CCLPastelColor } from '../../lib/const/config';\n</script>\n\n<div class=\"color-palette\">\n\t<h2>Vivid Colors</h2>\n\t<div class=\"color-grid\">\n\t\t{#each Object.entries(CCLVividColor) as [name, color]}\n\t\t\t<div class=\"color-sample\">\n\t\t\t\t<DatePicker\n\t\t\t\t\tid={`vivid-${name.toLowerCase()}`}\n\t\t\t\t\tplaceholder={name}\n\t\t\t\t\tborderColor={color}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t{/each}\n\t</div>\n\n\t<h2>Pastel Colors</h2>\n\t<div class=\"color-grid\">\n\t\t{#each Object.entries(CCLPastelColor) as [name, color]}\n\t\t\t<div class=\"color-sample\">\n\t\t\t\t<DatePicker\n\t\t\t\t\tid={`pastel-${name.toLowerCase()}`}\n\t\t\t\t\tplaceholder={name}\n\t\t\t\t\tborderColor={color}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t{/each}\n\t</div>\n</div>\n\n<style>\n\t.color-palette {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tgap: 2rem;\n\t}\n\t.color-grid {\n\t\tdisplay: grid;\n\t\tgrid-template-columns: repeat(auto-fill, minmax(200px, 1fr));\n\t\tgap: 1rem;\n\t}\n\t.color-sample {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tgap: 0.5rem;\n\t}\n</style>\n","import type { Meta, StoryObj } from '@storybook/svelte';\nimport DatePicker from '../lib/DatePicker.svelte';\nimport { CCLVividColor, CCLPastelColor } from '../lib/const/config';\nimport { expect, fn, userEvent, within } from '@storybook/test';\nimport { DateTime } from 'luxon';\nimport AllColorsDatePickerWrapper from './AllColors/AllColorsDatePickerWrapper.svelte';\n\nconst colorOptions = Object.values(CCLVividColor);\n\nconst meta = {\n\ttitle: 'Form/DatePicker',\n\tcomponent: DatePicker,\n\ttags: ['autodocs'],\n\targTypes: {\n\t\tselectedDate: {\n\t\t\tcontrol: { type: 'date' }\n\t\t},\n\t\tlabel: {\n\t\t\tcontrol: { type: 'text' }\n\t\t},\n\t\tid: {\n\t\t\tcontrol: { type: 'text' }\n\t\t},\n\t\tplaceholder: {\n\t\t\tcontrol: { type: 'text' }\n\t\t},\n\t\tborderColor: {\n\t\t\tcontrol: { type: 'select' },\n\t\t\toptions: Object.values(CCLVividColor)\n\t\t},\n\t\tdisableBlurClose: {\n\t\t\tcontrol: { type: 'boolean' }\n\t\t}\n\t}\n} satisfies Meta<DatePicker>;\n\nexport default meta;\ntype Story = StoryObj<typeof meta>;\n\nconst createStory = (args: Story['args']): Story => ({\n\targs: {\n\t\t...args,\n\t\tdisableBlurClose: true // テスト中はblurで閉じないようにする\n\t},\n\tplay: async ({ canvasElement, step }) => {\n\t\tconst canvas = within(canvasElement);\n\t\tconst input = canvas.getByPlaceholderText(args.placeholder || '日付を選択');\n\n\t\tawait step('日付ピッカーが開くこと', async () => {\n\t\t\tawait userEvent.click(input);\n\t\t\tawait expect(canvas.getByText(/\\d{4}年\\d{2}月/)).toBeInTheDocument(); // 例: 2023年10月\n\t\t});\n\n\t\t\t\tawait step('日付を選択できること', async () => {\n\t\t\tconst today = DateTime.local(); // Luxonを使用して現在の日付を取得\n\t\t\tconst dayOfMonth = today.day;\n\t\t\tconst dayButton = await canvas.findByRole('button', { name: String(dayOfMonth) });\n\t\t\tawait userEvent.click(dayButton);\n\t\t\tawait expect(input).toHaveValue(today.toFormat('yyyy/MM/dd')); // Luxonのフォーマットに合わせる\n\t\t});\n\n\t\tawait step('日付ピッカーが閉じること', async () => {\n\t\t\tawait expect(canvas.queryByText(/\\d{4}年\\d{2}月/)).not.toBeInTheDocument();\n\t\t});\n\n\t\t\n\t}\n});\n\nexport const Default = createStory({\n\tplaceholder: '日付を選択',\n\tselectedDate: null,\n\tborderColor: CCLVividColor.STRAWBERRY_PINK\n});\n\nexport const WithInitialDate = createStory({\n\tplaceholder: '初期日付',\n\tselectedDate: new Date('2023-01-15'),\n\tborderColor: CCLVividColor.PINEAPPLE_YELLOW\n});\n\nWithInitialDate.play = async ({ canvasElement, step, args }) => {\n\tconst canvas = within(canvasElement);\n\tconst input = canvas.getByPlaceholderText(args.placeholder || '初期日付');\n\n\tawait step('初期日付が正しく表示されていること', async () => {\n\t\tconst expectedDate = DateTime.fromJSDate(args.selectedDate as Date).toFormat('yyyy/MM/dd');\n\t\tawait expect(input).toHaveValue(expectedDate);\n\t});\n};\n\nexport const AllColors: Story = {\n\trender: () => ({ Component: AllColorsDatePickerWrapper }),\n\targs: {},\n\tparameters: {\n\t\tdocs: {\n\t\t\tsource: {\n\t\t\t\tcode: null\n\t\t\t}\n\t\t}\n\t}\n};\n"],"names":["div2","div1","cov_1eeswispnq","s","meta","title","component","DatePicker","tags","argTypes","selectedDate","control","type","label","id","placeholder","borderColor","options","Object","values","CCLVividColor","disableBlurClose","createStory","args","play","canvasElement","step","canvas","within","input","getByPlaceholderText","userEvent","click","expect","getByText","toBeInTheDocument","today","DateTime","local","dayOfMonth","day","dayButton","findByRole","name","String","toHaveValue","toFormat","queryByText","not","Default","STRAWBERRY_PINK","WithInitialDate","Date","PINEAPPLE_YELLOW","expectedDate","fromJSDate","AllColors","render","Component","AllColorsDatePickerWrapper","parameters","docs","source","code","originalSource"],"mappings":"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"}